<p align="center">
  <a href="" rel="noopener">
 <img src="https://i.imgur.com/krVMYr2.png" alt="Project Logo"></a>
</p>

## üìñ Version / –í–µ—Ä—Å–∏—è
- [üá∑üá∫ RU](#RU)

---

## üá∑üá∫ RU <a name="RU"></a>

## üìù –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#aboutRU)
- [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã](#how_it_worksRU)
- [–ê–Ω–∞–ª–∏–∑ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π](#hash_functionsRU)
- [–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏](#platformOptimizationsRU)
- [–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏](#programOptimizationsRU)
- [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#conclusionRU)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#installationRU)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#built_usingRU)
- [–ê–≤—Ç–æ—Ä—ã](#authorsRU)

---

## üßê –û –ø—Ä–æ–µ–∫—Ç–µ <a name="aboutRU"></a>

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –•—ç—à-—Ç–∞–±–ª–∏—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —è—á–µ–π–∫–∞–º –ø–∞–º—è—Ç–∏, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –∫–æ–ª–ª–∏–∑–∏–∏ –∏ —É—Å–∫–æ—Ä—è—è –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–ª–ª–∏–∑–∏–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è [–º–µ—Ç–æ–¥–æ–º —Ü–µ–ø–æ—á–µ–∫](https://neerc.ifmo.ru/wiki/index.php?title=%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BB%D0%BB%D0%B8%D0%B7%D0%B8%D0%B9).

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –∫–æ–¥–∞. –î–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã [Valgrind](https://valgrind.org/), [Kcachegrind](https://github.com/KDE/kcachegrind) –∏ [Perf](https://perf.wiki.kernel.org/index.php/Main_Page).

### –ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ `crc32` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Intel Intrinsics.
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Intel Intrinsics.
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —è—á–µ–π–∫–∏ –≤ hash-bucket –Ω–∞ —è–∑—ã–∫–µ assembler x86-64 (NASM).
- –†–∞–∑–≤–µ—Ä—Ç–∫–∞ —Ü–∏–∫–ª–æ–≤ –∏ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ `adler32`.

---

## ‚öôÔ∏è –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã <a name="how_it_worksRU"></a>

–•—ç—à-—Ç–∞–±–ª–∏—Ü–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ª–∏–Ω–µ–π–Ω—ã–º –ø–æ–∏—Å–∫–æ–º. –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö—ç—à–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –µ–≥–æ –¥–ª—è –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –≤ –º–∞—Å—Å–∏–≤–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ **O(1)**. –û–¥–Ω–∞–∫–æ –∫–æ–ª–ª–∏–∑–∏–∏ (—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ö—ç—à–µ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö) –Ω–µ–∏–∑–±–µ–∂–Ω—ã. –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ —Ü–µ–ø–æ—á–µ–∫ (—Å–º. —Ä–∏—Å. 1): –∫–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ –º–∞—Å—Å–∏–≤–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ö—ç—à–µ–º.

<p align="center">
    <figure>
        <a href="" rel="noopener">
        <img src="https://i.imgur.com/4dyOrbF.jpeg" alt="–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã"></a>
        <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 1. –ú–µ—Ç–æ–¥ —Ü–µ–ø–æ—á–µ–∫ —Ä–µ—à–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π.</figcaption>
    </figure>
</p>

### –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (load factor)

–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî —ç—Ç–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —á–∏—Å–ª–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ –∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —è—á–µ–µ–∫ –º–∞—Å—Å–∏–≤–∞. –° —Ä–æ—Å—Ç–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏–π, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. **–í —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö** –≤ –ø—Ä–æ–µ–∫—Ç–µ –≤—ã–±—Ä–∞–Ω –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è **15**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π. 

–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã–º–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `fillHashTable`. –î–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `rehashTable`.

---

## üìà –ê–Ω–∞–ª–∏–∑ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π <a name="hash_functionsRU"></a>

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ–¥–µ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ–Ω–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–∞—à –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ —è—á–µ–π–∫–∞–º —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã.

- **PJW32**
- **Adler32**
- **SDBM32**
- **FNV32**
- **Murmur3**
- **CRC32**

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–∞ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```c++
struct string {
    char  *data;  // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–æ–∫—É
    size_t size;  // –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏
};
```

–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî 19,289 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–ª–æ–≤ (–¥–ª–∏–Ω–∞ –¥–æ 32 —Å–∏–º–≤–æ–ª–æ–≤) –∏–∑ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –®–µ–∫—Å–ø–∏—Ä–∞ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.

### –ú–µ—Ç–æ–¥–∏–∫–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π
–•—ç—à-—Ç–∞–±–ª–∏—Ü–∞ –∑–∞–ø–æ–ª–Ω—è–ª–∞—Å—å —Å–ª–æ–≤–∞—Ä–µ–º, –∞ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ bucket‚Äô–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ CSV –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ö—ç—à–µ–π.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π

#### PJW32
- **–û–ø–∏—Å–∞–Ω–∏–µ**: [PJW hash function](https://en.wikipedia.org/wiki/PJW_hash_function), –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –ü–∏—Ç–µ—Ä–æ–º –£–∞–π–Ω–±–µ—Ä–≥–µ—Ä–æ–º –≤ 1981 –≥–æ–¥—É. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–±–∏—Ç–æ–≤—ã–µ –∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ —á–∏—Å–ª–∞–º–∏.
- **–î–∏—Å–ø–µ—Ä—Å–∏—è**: 3769.30
- **–ö–æ–¥**:
```c++
uint32_t pjw32(string *data, uint32_t modulo) {
    char  *message = data->data;
    size_t length  = data->size;

    uint32_t hash = 0;
    uint32_t test = 0;

    for (size_t i = 0; i < length; i++) {
        hash = (hash << 4) + (uint8_t)(message[i]);

        if ((test = (hash & 0xF0000000)) != 0) {
            hash = ((hash ^ (test >> 24)) & 0xFFFFFFF);
        }
    }

    return hash % modulo;
}
```
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**:
  <figure style="text-align: center;">
    <img src="https://i.imgur.com/ZFhm4Tg.png" alt="PJW32">
    <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é PJW32</figcaption>
  </figure>

#### Adler32
- **–û–ø–∏—Å–∞–Ω–∏–µ**: [Adler-32](https://en.wikipedia.org/wiki/Adler-32), –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –≤ 1995 –≥–æ–¥—É. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ 16-–±–∏—Ç–Ω—ã—Ö —á–∏—Å–ª–∞. –ë—ã—Å—Ç—Ä–∞—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Ç—Ä–æ–∫.
- **–î–∏—Å–ø–µ—Ä—Å–∏—è**: 587.01
- **–ö–æ–¥**:
```c++
uint32_t adler32(string *data) {
    const char *message = data->data;
    size_t      length  = data->size;

    uint32_t a = 1;
    uint32_t b = 0;

    for (size_t i = 0; i < length; i++) {
        a = (a + (uint8_t)(message[i])) % 65521;
        b = (b + a) % 65521;
    }

    return (b << 16) + a;
}
```
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**:
  <figure style="text-align: center;">
    <img src="https://i.imgur.com/wKQpBWL.png" alt="Adler32">
    <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 3. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é Adler32</figcaption>
  </figure>

#### SDBM32
- **–û–ø–∏—Å–∞–Ω–∏–µ**: [SDBM](https://en.wikipedia.org/wiki/SDBM), –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –≤ 1997 –≥–æ–¥—É. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–±–∏—Ç–æ–≤—ã–µ –∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏.
- **–î–∏—Å–ø–µ—Ä—Å–∏—è**: 20.71
- **–ö–æ–¥**:
```c++
uint32_t sdbm32(string *data) {
    char  *message = data->data;
    size_t length  = data->size;

    uint32_t hash = 0;

    for (size_t i = 0; i < length; i++) {
        hash = (uint8_t)(message[i]) + (hash << 6) + (hash << 16) - hash;
    }

    return hash;
}
```
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**:
  <figure style="text-align: center;">
    <img src="https://i.imgur.com/WHYCYpN.png" alt="SDBM32">
    <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 4. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é SDBM32</figcaption>
  </figure>

#### FNV32
- **–û–ø–∏—Å–∞–Ω–∏–µ**: [Fowler‚ÄìNoll‚ÄìVo](https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function), –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –≤ 1991 –≥–æ–¥—É. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Ç—Ä–æ–∫.
- **–î–∏—Å–ø–µ—Ä—Å–∏—è**: 18.11
- **–ö–æ–¥**:
```c++
uint32_t fnv32(string *data) {
    char  *message = data->data;
    size_t length  = data->size;

    uint32_t hash = 0x811C9DC5;

    for (size_t i = 0; i < length; i++) {
        hash ^= (uint8_t)(message[i]);
        hash *= 16777619;
    }

    return hash;
}
```
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**:
  <figure style="text-align: center;">
    <img src="https://i.imgur.com/1IDbXQq.png" alt="FNV32">
    <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 5. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é FNV32</figcaption>
  </figure>

#### Murmur3
- **–û–ø–∏—Å–∞–Ω–∏–µ**: [MurmurHash](https://en.wikipedia.org/wiki/MurmurHash), –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –≤ 2008 –≥–æ–¥—É. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ.
- **–î–∏—Å–ø–µ—Ä—Å–∏—è**: 17.66
- **–ö–æ–¥**:
```c++
uint32_t loadWord(const char *p) {
    return (uint32_t)((uint8_t)p[0])
           | ((uint8_t)p[1] << 8)
           | ((uint8_t)p[2] << 16)
           | ((uint8_t)p[3] << 24);
}

uint32_t rotl32(uint32_t x, int8_t r) {
    return (x << r) | (x >> (32 - r));
}

uint32_t murmur3Wrapper(string *data, uint32_t seed) {
    return murmur3(data, seed);
}

uint32_t murmur3(string *data, uint32_t seed) {
    const char *message = data->data;
    size_t length = data->size;

    const uint32_t c1 = 0xCC9E2D51;
    const uint32_t c2 = 0x1B873593;
    const uint32_t c3 = 0x85EBCA6B;
    const uint32_t c4 = 0xC2B2AE35;

    uint32_t h       = seed;
    size_t   nblocks = length / 4;

    for (size_t i = 0; i < nblocks; i++) {
        uint32_t k = loadWord(message + i * 4);
        k *= c1;
        k = rotl32(k, 15);
        k *= c2;

        h ^= k;
        h = rotl32(h, 13);
        h = h * 5 + 0xE6546B64;
    }

    const uint8_t *tail = (const uint8_t*)(message + nblocks * 4);
    uint32_t k1 = 0;

    switch (length & 3) {
        case 3: k1 ^= tail[2] << 16;
        case 2: k1 ^= tail[1] << 8;
        case 1: k1 ^= tail[0];
            k1 *= c1;
            k1 = rotl32(k1, 15);
            k1 *= c2;
            h ^= k1;
    }

    h ^= length;
    h ^= h >> 16;
    h *= c3;
    h ^= h >> 13;
    h *= c4;
    h ^= h >> 16;

    return h;
}
```
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**:
  <figure style="text-align: center;">
    <img src="https://i.imgur.com/airAcEB.png" alt="Murmur3">
    <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 5. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é Murmur3</figcaption>
  </figure>

#### CRC32
- **–û–ø–∏—Å–∞–Ω–∏–µ**: [Cyclic redundancy check](https://en.wikipedia.org/wiki/Cyclic_redundancy_check), –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –≤ 1961 –≥–æ–¥—É. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ò–º–µ–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å –ø–æ–º–æ—â—å—é Intel Intrinsics.
- **–î–∏—Å–ø–µ—Ä—Å–∏—è**: 17.01
- **–ö–æ–¥**:
```c++
uint32_t crc32(string *data) {
    uint32_t crc32 = 0xFFFFFFFF;

    unsigned char *buffer = (unsigned char *)data->data;
    size_t         length = data->size;

    size_t quotient = length / 8;

    while (quotient--) {
        crc32 = _mm_crc32_u64(crc32, *(uint64_t *)buffer);
        buffer += 8;
    }

    if (length & 4) {
        crc32 = _mm_crc32_u32(crc32, *(uint32_t *)buffer);
        buffer += 4;
    }

    if (length & 2) {
        crc32 = _mm_crc32_u16(crc32, *(uint16_t *)buffer);
        buffer += 2;
    }

    if (length & 1) {
        crc32 = _mm_crc32_u8(crc32, *(uint8_t *)buffer);
    }

    return crc32 ^ 0xFFFFFFFF;
}
```
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**:
    <figure style="text-align: center;">
    <img src="https://i.imgur.com/gPV8Cks.png" alt="CRC32">
    <figcaption style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 5. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é CRC32</figcaption>
    </figure>

### –í—ã–±–æ—Ä –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏

–ü—Ä–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è 15 —Ñ—É–Ω–∫—Ü–∏—è **`CRC32`** –ø–æ–∫–∞–∑–∞–ª–∞ –ª—É—á—à—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é (17.01), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. 
–•–æ—Ä–æ—à–æ —Å–µ–±—è –ø–æ–∫–∞–∑–∞–ª–∞ –∏ —Ñ—É–Ω–∫—Ü–∏—è **`ADLER32`**, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —ç—Ç–∏—Ö –¥–≤—É—Ö —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π.

---

## üõ†Ô∏è –ü–ª–∞—Ç—Ñ–æ—Ä–º–æ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ <a name="platformOptimizationsRU"></a>

–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑–º–µ—Ä—è–ª–æ—Å—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π `__rdtsc` (—Ç–∞–∫—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞). –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:  

$$\delta = (1 - T_{\text{curr}} / T_{\text{prev}}) \cdot 100 \%$$

–∞–±—Å–æ–ª—é—Ç–Ω—ã–π:  

$$\Delta = (1 - T_{\text{curr}} / T_0) \cdot 100 \% $$

–≥–¥–µ:
- $T_{\text{prev}}$ ‚Äî –≤—Ä–µ–º—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏,
- $T_{\text{curr}}$ ‚Äî –≤—Ä–µ–º—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏,
- $T_0$ ‚Äî –≤—Ä–µ–º—è –Ω–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏.

> [!NOTE]  
> –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏—Å—å –Ω–∞ Intel Core i5-1235U (12 —è–¥–µ—Ä, 16 –ø–æ—Ç–æ–∫–æ–≤, 10 –Ω–º, 1.3 –ì–ì—Ü, –±—É—Å—Ç –¥–æ 4.4 –ì–ì—Ü) –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Ä–µ–∂–∏–º `Turbo Boost` –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—ã–ª –æ—Ç–∫–ª—é—á–µ–Ω. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞—Å—å –Ω–∞ —É—Ä–æ–≤–Ω–µ 82-88 –≥—Ä–∞–¥—É—Å–æ–≤ –ø–æ –¶–µ–ª—å—Å–∏—é, —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–∞ –Ω–µ –Ω–∞–±–ª—é–¥–∞–ª–æ—Å—å. 

–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–π —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ–≤–∞—é—Ç—Å—è –∫—ç—à–∏.
–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `100` —Ç–µ—Å—Ç–æ–≤ –ø–æ `100` –ø–æ–∏—Å–∫–æ–≤ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è —Ä–∞–∑–º–µ—Ä–æ–º –≤ –ø–æ–ª–æ–≤–∏–Ω—É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ 9650 —Å–ª–æ–≤) –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —É—Å—Ä–µ–¥–Ω—è—é—Ç—Å—è.

### –ë–∞–∑–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –∏ —Å –æ–ø—Ü–∏–µ–π `-O3`:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-Odefault, —Ç–∞–∫—Ç—ã) | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|------------------------- | -------------------------- |
| Adler32     | 2368011 ¬± 83353,99       |  3,52%                     |
| CRC32       | 5574884 ¬± 166131,54      |  2,98%                     |

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-O3, —Ç–∞–∫—Ç—ã)   | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|----------------------| -------------------------- |
| Adler32     | 1672869 ¬± 52360,80   |  3,13%                     |
| CRC32       | 3028264 ¬± 83580,09   |  2,76%                     |

–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å `-O3` –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π `-Odefault`:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|---------------------------|------------------------|
| Adler32     | 41,55% ¬± 4,71%            | 41,55% ¬± 4,71%         |
| CRC32       | 84,10% ¬± 4,06%            | 84,10% ¬± 4,06%         |

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ `-O3` –ø–æ–ª—É—á–∏–ª–∏ —Ö–æ—Ä–æ—à–∏–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –û—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π `crc32` –∏ `adler32`.
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–∞ —Å –ø–æ–º–æ—â—å—é [Ghidra](https://github.com/NationalSecurityAgency/ghidra). –ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é `crc32`.

* `-Odefault`
–ö–æ–¥ —Å —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ü–∏–∫–ª–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 8 –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ —Å–¥–≤–∏–≥–∞ –Ω–∞ –±–∞–π—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–µ–∫–µ, –∫–æ–¥ –æ—á–µ–Ω—å –±–ª–∏–∑–æ–∫ –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –ø–æ —Å–≤–æ–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
–û–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã —Å —è–≤–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –≤–µ—Ç–≤–ª–µ–Ω–∏—è (`jmp`, `jbe`, `jb`)

<div style="max-width: 600px; margin: 0 auto; text-align: center;">
    <a href="" rel="noopener" style="display: block;">
        <img src="https://i.ibb.co/KpfRTXDM/image.png" alt="Odefault" style="display: block; margin: 0 auto 10px; max-width: 100%;">
    </a>
    <p style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 6. –î–∏–∑–∞—Å—Å–µ–º–±–ª–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π.</p>
</div>

* `-O3`
–ö–æ–¥ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ü–∏–∫–ª (`L4` –≤ `-Odefault`) –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
–Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–∏–∫–ª–æ–º (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á–µ—Ç—á–∏–∫–∞, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ö–æ–¥). –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã, –º–∏–Ω–∏–∑–∏—Ä—É—è –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏.
–ï—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è —Å –Ω—É–ª–µ–≤–æ–π –¥–ª–∏–Ω–æ–π –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`test rsi, rsi; je .L4`), —á—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏.
–í–µ—Ä–æ—è—Ç–Ω–æ, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª –ø–æ—Ä—è–¥–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–µ–≤ - –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏
`and`, `neg`, `shr`, `xor` –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã —Ç–∞–∫, —á—Ç–æ–±—ã –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–Ω–≤–µ–π–µ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

<div style="max-width: 600px; margin: 0 auto; text-align: center;">
    <a href="" rel="noopener">
        <img src="https://i.ibb.co/ycNfqsLt/image.png" alt="O3" style="display: block; margin: 0 auto 10px; max-width: 100%;">
    </a>
    <p style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 7. –î–∏–∑–∞—Å—Å–µ–º–±–ª–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–Ω—ã–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ O3.</p>
</div>

–ü–æ–ø—Ä–æ–±—É–µ–º —Å–Ω–∞—á–∞–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏—é, —Ç–∞–∫ –∫–∞–∫ –≤ –Ω–µ–π –µ—â–µ –µ—Å—Ç—å –±–æ–ª—å—à–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è.

---

#### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ crc32 —Å –ø–æ–º–æ—â—å—é Intel Intrinsics
–ì—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π (Kcachegrind) –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è —Ñ—É–Ω–∫—Ü–∏–∏ `crc32` –∑–∞–Ω–∏–º–∞–µ—Ç —Ü–∏–∫–ª –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:

<div style="max-width: 600px; margin: 0 auto; text-align: center;">
    <a href="" rel="noopener">
    <img src="https://i.ibb.co/CKCVsnXD/image.png" alt="default kcachegrind" style="display: block; margin: 0 auto 10px; max-width: 100%;"></a>
    <p style="text-align: center;"n>–†–∏—Å—É–Ω–æ–∫ 8. –¶–∏–∫–ª –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ crc32.</p>
</div>

–ü–æ–ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `_mm_crc32_uXX` –¥–ª—è —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 8, 16, 32 –∏ 64 –±–∏—Ç –±–∏—Ç–∞
–∑–∞ –æ–¥–∏–Ω —Ü–∏–∫–ª. –ë—É–¥–µ–º –æ–∂–∏–¥–∞—Ç—å —Ö–æ—Ä–æ—à–µ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞, –Ω–æ —Å—Ç–æ–∏—Ç –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏—Ä–æ—Å—Ç –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –∑–∞–º–µ—Ç–Ω–µ–µ.
–¢–µ–ø–µ—Ä—å –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```c++
uint32_t crc32(string *data) {
    uint32_t crc32 = 0xFFFFFFFF;

    unsigned char *buffer = (unsigned char *)data->data;
    size_t         length = data->size;

    size_t quotient = length / 8;

    while (quotient--) {
        crc32 = _mm_crc32_u64(crc32, *(uint64_t *)buffer);
        buffer += 8;
    }

    if (length & 4) {
        crc32 = _mm_crc32_u32(crc32, *(uint32_t *)buffer);
        buffer += 4;
    }

    if (length & 2) {
        crc32 = _mm_crc32_u16(crc32, *(uint16_t *)buffer);
        buffer += 2;
    }

    if (length & 1) {
        crc32 = _mm_crc32_u8(crc32, *(uint8_t *)buffer);
    }

    return crc32 ^ 0xFFFFFFFF;
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-O3 + crc32 Intrinsics, —Ç–∞–∫—Ç—ã) | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|---------------------------------------| ---------------------------|
| Adler32     | 1634744 ¬± 46590,20                    |  2,85%                     |
| CRC32       | 1160333 ¬± 33533,62                    |  2,89%                     |

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å –≤–µ—Ä—Å–∏–µ–π —Å –æ–ø—Ü–∏–µ–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ `-O3` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `crc32 Intel Intrinsics`:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|---------------------------|------------------------|
| Adler32     | 2,33% ¬± 4,23%             | 44,86% ¬± 4,53%         |
| CRC32       | 160,98% ¬± 4,00%           | 380,46% ¬± 4,15%        |

–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø–æ—á—Ç–∏ –≤ 3 —Ä–∞–∑–∞ - –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ù–µ –±—É–¥–µ–º –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –Ω–∞ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ–º.

---

#### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ strcmp —Å –ø–æ–º–æ—â—å—é Intel Intrinsics
–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ `crc32` —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º —Å—Ç–∞–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è `strcmp`:

<div style="max-width: 600px; margin: 0 auto; text-align: center;">
    <a href="" rel="noopener">
    <img src="https://i.ibb.co/358QX2MP/image.png" alt="Kcachegrind strcmp" style="display: block; margin: 0 auto 10px; max-width: 100%;"></a>
    <p style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 9. –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∫–ª—é—á–µ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ.</p>
</div>

–ü–æ–ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `_mm256_loadu_si256` –∏ `_mm256_cmpeq_epi8` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ:

```c++
inline int fastStrcmp(const char *a, const char *b) {
    __m256i va = _mm256_loadu_si256((const __m256i *)a);
    __m256i vb = _mm256_loadu_si256((const __m256i *)b);

    __m256i  cmp  = _mm256_cmpeq_epi8(va, vb);
    uint32_t mask = _mm256_movemask_epi8(cmp);

    return (mask != 0xFFFFFFFF);
}
```

–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–∂–µ—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –¥–∞–≤–∞—Ç—å —Å–æ–≤—Å–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π `strcmp` –≤ `libc`. –û–¥–Ω–∞–∫–æ —Å—Ç–æ–∏—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ —ç—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –º–µ–Ω–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –∏ –≤–æ–≤—Å–µ –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-O3 + crc32 Intrinsics + strcmp Intrinsics, —Ç–∞–∫—Ç—ã) | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|---------------------------------------------------------- | ---------------------------|
| Adler32     | 1373072 ¬± 32699,21                                        |  2,56%                     |
| CRC32       | 879187 ¬± 24265,56                                         |  2,76%                     |

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π —Å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–Ω—ã–º–∏ –∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ (`crc32 Intel Intrinsics` –∏ `strcmp Intel Intrinsics`).

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|---------------------------|------------------------|
| Adler32     | 27,98% ¬± 3,83%            | 85,39% ¬± 4,35%         |
| CRC32       | 31,98% ¬± 4,00%            | 534,10%% ¬± 4,06%       |

–í–∏–¥–∏–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –Ω–∞ 32% –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–µ–π `crc32` –∏ 28% - —Å `adler32`. –ö—Ä–æ–º–µ —ç—Ç–æ–≥–æ, –∏–Ω–ª–∞–π–Ω–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–∏ `fastStrcmp` —É–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞
–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏. 

---

#### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —è—á–µ–π–∫–∏ –≤ hash-bucket –Ω–∞ —è–∑—ã–∫–µ assembler x86-64 (NASM)
–§—É–Ω–∫—Ü–∏—è `createNode` —Ç–∞–∫–∂–µ –æ–∫–∞–∑–∞–ª–∞—Å—å –≤ —Ç–æ–ø–µ –≤—ã–∑–æ–≤–æ–≤: –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –≤ –Ω–µ–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–π—Ç–æ–≤ –ø–∞–º—è—Ç–∏ - –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. 

–ù–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö `rep movsb` –≤—ã—Å–æ–∫–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö –±–ª–æ–∫–æ–≤ (–∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à), –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω—É–ª–µ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, 
—Ç–∞–∫ –∫–∞–∫ –∫–æ–ø–∏—Ä—É–µ—Ç —Ä–æ–≤–Ω–æ `length` –±–∞–π—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `rsi` (–∏—Å—Ç–æ—á–Ω–∏–∫) –≤ `rdi` (–ø–æ–ª—É—á–∞—Ç–µ–ª—å). 
–í –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º —É—Å–ª–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–∫–∏ branch-predictor'–∞.

–ê—Å—Å–µ–º–±–ª–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è (NASM):

```nasm
section .text
global createNode
extern malloc, free

createNode:
    push rbx
    push r12
    push r13

    mov r12, rdi                ; wordPtr
    mov r13, rsi                ; length

    mov edi, 16
    call malloc
    test rax, rax
    jz .error

    mov rbx, rax
    mov [rbx + 8], r13          ; newNode->size = length

    lea rdi, [r13 + 1]
    call malloc
    test rax, rax
    jz .freeError

    mov [rbx], rax              ; newNode->data = rax

    mov rdi, rax                ; destination
    mov rsi, r12                ; source
    mov rcx, r13                ; length
    rep movsb                   ; copy length byte
    mov byte [rax + r13], 0

    mov rax, rbx                ; return newNode
    jmp .end

.freeError:
    mov rdi, rbx
    call free

.error:
    xor rax, rax

.end:
    pop r13
    pop r12
    pop rbx

    ret
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-O3 + crc32 Intrinsics + strcmp Intrinsics + createNode ASM, —Ç–∞–∫—Ç—ã) | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|--------------------------------------------------------------------------- | ---------------------------|
| Adler32     | 1277313 ¬± 32129,88                                                         |  2,34%                     |
| CRC32       | 832188 ¬± 19389,98                                                          |  2,33%                     |

–ü—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|---------------------------|------------------------|
| Adler32     | 7,50% ¬± 3,47%             | 72,46% ¬± 4,23%         |
| CRC32       | 5,65% ¬± 3,61%             | 569,91% ¬± 3,78%        |

–í —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö –¥–∞–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç –º–µ—Å—Ç–æ, –æ–¥–Ω–∞–∫–æ –æ–Ω–∞ —É–º–µ–Ω—å—à–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –∫–æ–¥–∞, –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –¥–∞–µ—Ç –º–∞–ª—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ—ç—Ç–æ–º—É –µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–µ –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç —Å–µ–±—è.

---

#### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ adler32 —Å –ø–æ–º–æ—â—å—é –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `adler32` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç–∫–∏ —Ü–∏–∫–ª–æ–≤:

```c++
uint32_t adler32(string *data) {
    const char *message = data->data;
    size_t length = data->size;

    uint32_t a = 1;
    uint32_t b = 0;

    #ifdef OPTIMIZE_ADLER32

    size_t i = 0;

    for (; i + 4 <= length; i += 4) {
        uint32_t bytes;
        memcpy(&bytes, message + i, 4);

        __asm__ volatile (
                "mov    %1,    %%ecx\n"
                "movzbl %%cl,  %%ecx\n"
                "addl   %%ecx, %0\n"
                "addl   %0,    %2\n"
                "mov    %1,    %%ecx\n"
                "shr    $8,    %%ecx\n"
                "movzbl %%cl,  %%ecx\n"
                "addl   %%ecx, %0\n"
                "addl   %0,    %2\n"
                "mov    %1,    %%ecx\n"
                "shr    $16,   %%ecx\n"
                "movzbl %%cl,  %%ecx\n"
                "addl   %%ecx, %0\n"
                "addl   %0,    %2\n"
                "mov    %1,    %%ecx\n"
                "shr    $24,   %%ecx\n"
                "movzbl %%cl,  %%ecx\n"
                "addl   %%ecx, %0\n"
                "addl   %0,    %2\n"
                : "+r"(a), "+r"(bytes), "+r"(b)
                :
                : "ecx"
        );
    }

    for (; i < length; i++) {
        a = (a + (uint8_t)(message[i])) % 65521;
        b = (b + a) % 65521;
    }

    a %= 65521;
    b %= 65521;

    #else
        for (size_t i = 0; i < length; i++) {
            a = (a + (uint8_t)(message[i])) % 65521;
            b = (b + a) % 65521;
        }
    #endif

    return (b << 16) + a;
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-O3 + crc32 Intrinsics + strcmp Intrinsics + createNode ASM + adler32 ASM, —Ç–∞–∫—Ç—ã) | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|------------------------------------------------------------------------------------------| ---------------------------|
| Adler32     | 964479 ¬± 26523,17                                                                        | 2,75%                      |
| CRC32       | 830301 ¬± 20010,25                                                                        | 2,41%                      |

–ü–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –ø–æ–≤–ª–∏—è–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç–∫–∞ —Ü–∏–∫–ª–æ–≤ –∏ –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –Ω–∞ —Ä–∞–±–æ—Ç—É —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `Adler32`.

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|---------------------------|------------------------|
| Adler32     | 42,36% ¬± 3,61%            | 145,52% ¬± 4,47%        |
| CRC32       | 0,23% ¬± 3,35%             | 571,43% ¬± 3,83%        |

<div style="max-width: 600px; margin: 0 auto; text-align: center;">
    <a href="" rel="noopener">
    <img src="https://i.ibb.co/67j3BF4v/image.png" alt="adler32 optimization" style="display: block; margin: 0 auto 10px; max-width: 100%;"></a>
    <p style="text-align: center;">–†–∏—Å—É–Ω–æ–∫ 10. –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏ –≤ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ Adler32.</p>
</div>

–í –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–ª–æ–∫–∞–º–∏ –ø–æ 32 –±–∏—Ç–∞ –∑–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π. –≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π —Ü–∏–∫–ª–∞ –≤ 4 —Ä–∞–∑–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø–æ–±–∞–π—Ç–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
–≤ –Ω–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ 32-–±–∏—Ç–Ω–æ–≥–æ —Å–ª–æ–≤–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –±–∞–π—Ç—ã —Å –ø–æ–º–æ—â—å—é –ø–æ–±–∞–π—Ç–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (`movzbl` –∏ —Å–¥–≤–∏–≥–æ–≤ `shr`).
–ú–æ–¥—É–ª—å (`%65521`) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö 4-–±–∞–π—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤, –≤ —Ü–∏–∫–ª–µ –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –±–∞–π—Ç–æ–≤, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–µ–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ 
—è–≤–ª—è—é—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ—Ä–æ–≥–∏–º–∏.
–ü—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

---

## üñ•Ô∏è –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ <a name="programOptimizationsRU"></a>

–ü–æ—Å–ª–µ–¥–Ω–∏–º —à–∞–≥–æ–º –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å–≤—è–∑–∞–Ω —Å –≤—ã–∑–æ–≤–æ–º —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏. –†–∞–Ω–µ–µ, —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ö—ç—à –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏.
–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—É –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑—ã–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã –∫—ç—à–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏ branch-–ø—Ä–µ–¥–∏–∫—Ç–æ—Ä–∞.

–¢–µ–ø–µ—Ä—å –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ —Ç–µ—Å—Ç–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `hashFuncEnum`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π: *–ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é* –∏–ª–∏ *–ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤*.
–ü—Ä–∏ –ø—Ä—è–º–æ–º –≤—ã–∑–æ–≤–µ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –ª—É—á—à–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å—Ç—Ä–∞–∏–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é –≤–º–µ—Å—Ç–æ –µ–µ –≤—ã–∑–æ–≤–∞.

–ö–∞–∫ –∏ –æ–∂–∏–¥–∞–ª–æ—Å—å, —ç—Ç–æ –¥–∞–ª–æ –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ–π:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è (-O3 + crc32 Intrinsics + strcmp Intrinsics + createNode ASM + adler32 ASM + direct call, —Ç–∞–∫—Ç—ã) | –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ |
|-------------|------------------------------------------------------------------------------------------------------- | ---------------------------|
| Adler32     | 947599 ¬± 17530,85                                                                                      | 1,85%                      |
| CRC32       | 812232 ¬± 17219,31                                                                                      | 2,12%                      |

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|---------------------------|------------------------|
| Adler32     | 1,78% ¬± 3,31%             | 149,90% ¬± 3,98%        |
| CRC32       | 2,22% ¬± 3,21%             | 586,37% ¬± 3,66%        |

---

## üõê –ó–∞–∫–ª—é—á–µ–Ω–∏–µ <a name="conclusionRU"></a>

–ò—Å—Å–ª–µ–¥–æ–≤–∞–ª–∞—Å—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–π –∏ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü. –ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ `CRC32` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Intel Intrinsics –∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞, –∞ —Ç–∞–∫–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä–∏–ª–∏ —Ä–∞–±–æ—Ç—É —Ñ—É–Ω–∫—Ü–∏–π `crc32`, `strcmp`, `createNode` –∏ `adler32`. –ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

| –•—ç—à-—Ñ—É–Ω–∫—Ü–∏—è | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç (%) |
|-------------|------------------------|
| Adler32     | 149,90% ¬± 3,98%        |
| CRC32       | 586,37% ¬± 3,66%        |

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –ü–ª–∞—Ç—Ñ–æ—Ä–º–æ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã, –Ω–æ —Å–Ω–∏–∂–∞—é—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –∫–æ–¥–∞ –∏ —É—Å–ª–æ–∂–Ω—è—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É. –ò—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –æ—Ü–µ–Ω–∏–≤–∞—Ç—å —Å —É—á–µ—Ç–æ–º –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ <a name="installationRU"></a>

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø–æ–¥–º–æ–¥—É–ª–∏:
   ```shell
   git clone git@github.com:lvbealr/HashTable.git
   cd HashTable
   git submodule update --init --remote --recursive
   ```
2. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```shell
   mkdir build && cd build
   cmake -S .. -B .
   make
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:
   ```shell
   ./HashTable <–ø—É—Ç—å_–∫_–≤—Ö–æ–¥–Ω—ã–º_–¥–∞–Ω–Ω—ã–º> <–ø—É—Ç—å_–∫_—Ç–µ—Å—Ç–æ–≤—ã–º_–¥–∞–Ω–Ω—ã–º>
   # –ü—Ä–∏–º–µ—Ä: ./HashTable ../txt/text.txt ../txt/test.txt
   ```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: GCC/Clang, CMake 3.10+, NASM.

---

## ‚õè –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã <a name="built_usingRU"></a>

- [CMake](https://cmake.org/) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏.
- [customWarning](https://github.com/lvbealr/customWarning) ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
- [colorPrint](https://github.com/lvbealr/colorPrint) ‚Äî —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å.

---

## ‚úç –ê–≤—Ç–æ—Ä—ã <a name="authorsRU"></a>

- [@lvbealr](https://github.com/lvbealr) ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.